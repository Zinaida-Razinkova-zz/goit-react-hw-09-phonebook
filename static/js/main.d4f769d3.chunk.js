(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[1],{13:function(e,t,c){e.exports={AppBarHeader:"UserMenu_AppBarHeader__1v0gs",navlink:"UserMenu_navlink__BaexR",buttonLogOut:"UserMenu_buttonLogOut__nY7Nm",imgUser:"UserMenu_imgUser__moYkY",welcomeText:"UserMenu_welcomeText__16kfG"}},18:function(e,t,c){"use strict";c(3),c(30);var r=c(31);c.d(t,"a",(function(){return r.a}));var n=c(21);c.d(t,"b",(function(){return n.a}))},21:function(e,t,c){"use strict";t.a={getIsAuthenticated:function(e){return e.auth.isAuthenticated},getUsername:function(e){return e.auth.user.name}}},22:function(e,t,c){"use strict";var r=c(2),n=Object(r.b)("contacts/fetchContactRequest"),a=Object(r.b)("contacts/fetchContactSuccess"),s=Object(r.b)("contacts/fetchContactError"),u=Object(r.b)("contacts/addContactRequest"),o=Object(r.b)("contacts/addContactSuccess"),i=Object(r.b)("contacts/addContactError"),b=Object(r.b)("contacts/deleteContactRequest"),l=Object(r.b)("contacts/deleteContactSuccess"),j=Object(r.b)("contacts/deleteContactError"),O=Object(r.b)("contacts/changeFilter");t.a={fetchContactRequest:n,fetchContactSuccess:a,fetchContactError:s,addContactRequest:u,addContactSuccess:o,addContactError:i,deleteContactRequest:b,deleteContactSuccess:l,deleteContactError:j,changeFilter:O}},3:function(e,t,c){"use strict";var r=c(2),n=Object(r.b)("auth/registerRequest"),a=Object(r.b)("auth/registerSuccess"),s=Object(r.b)("auth/registerError"),u=Object(r.b)("auth/loginRequest"),o=Object(r.b)("auth/loginSuccess"),i=Object(r.b)("auth/loginError"),b=Object(r.b)("auth/logoutRequest"),l=Object(r.b)("auth/logoutSuccess"),j=Object(r.b)("auth/logoutError"),O=Object(r.b)("auth/getCurrentUserRequest"),d=Object(r.b)("auth/getCurrentUserSuccess"),h=Object(r.b)("auth/getCurrentUserError");t.a={registerRequest:n,registerSuccess:a,registerError:s,logoutRequest:b,logoutSuccess:l,logoutError:j,loginRequest:u,loginSuccess:o,loginError:i,getCurrentUserRequest:O,getCurrentUserSuccess:d,getCurrentUserError:h}},30:function(e,t,c){"use strict";var r,n,a,s,u=c(5),o=c(7),i=c(2),b=c(3),l={name:null,email:null},j=Object(i.c)(l,(r={},Object(u.a)(r,b.a.registerSuccess,(function(e,t){return t.payload.user})),Object(u.a)(r,b.a.loginSuccess,(function(e,t){return t.payload.user})),Object(u.a)(r,b.a.logoutSuccess,(function(){return l})),Object(u.a)(r,b.a.getCurrentUserSuccess,(function(e,t){return t.payload})),r)),O=Object(i.c)(null,(n={},Object(u.a)(n,b.a.registerSuccess,(function(e,t){return t.payload.token})),Object(u.a)(n,b.a.loginSuccess,(function(e,t){return t.payload.token})),Object(u.a)(n,b.a.logoutSuccess,(function(){return null})),n)),d=function(e,t){return t.payload},h=Object(i.c)(null,(a={},Object(u.a)(a,b.a.registerError,d),Object(u.a)(a,b.a.loginError,d),Object(u.a)(a,b.a.logoutError,d),Object(u.a)(a,b.a.getCurrentUserError,d),a)),g=Object(i.c)(!1,(s={},Object(u.a)(s,b.a.registerSuccess,(function(){return!0})),Object(u.a)(s,b.a.loginSuccess,(function(){return!0})),Object(u.a)(s,b.a.getCurrentUserSuccess,(function(){return!0})),Object(u.a)(s,b.a.registerError,(function(){return!1})),Object(u.a)(s,b.a.loginError,(function(){return!1})),Object(u.a)(s,b.a.getCurrentUserError,(function(){return!1})),Object(u.a)(s,b.a.logoutSuccess,(function(){return!1})),s));t.a=Object(o.c)({user:j,token:O,isAuthenticated:g,error:h})},31:function(e,t,c){"use strict";var r=c(15),n=c.n(r),a=c(25),s=c(17),u=c.n(s),o=c(3);u.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(e){u.a.defaults.headers.common.Authorization="Bearer ".concat(e)};t.a={register:function(e){return function(){var t=Object(a.a)(n.a.mark((function t(c){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(o.a.registerRequest()),t.prev=1,t.next=4,u.a.post("/users/signup",e);case 4:r=t.sent,i(r.data.token),c(o.a.registerSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),c(o.a.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(a.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(o.a.logoutRequest()),e.prev=1,e.next=4,u.a.post("/users/logout");case 4:t(o.a.logoutSuccess()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t(o.a.logoutError(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(a.a)(n.a.mark((function t(c){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(o.a.loginRequest()),t.prev=1,t.next=4,u.a.post("/users/login",e);case 4:r=t.sent,i(r.data.token),c(o.a.loginSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),c(o.a.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(a.a)(n.a.mark((function e(t,c){var r,a,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c(),a=r.auth.token){e.next=3;break}return e.abrupt("return");case 3:return i(a),t(o.a.getCurrentUserRequest()),e.prev=5,e.next=8,u.a.get("/users/current");case 8:s=e.sent,t(o.a.getCurrentUserSuccess(s.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(o.a.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,c){return e.apply(this,arguments)}}()}}},86:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c.n(r),a=c(27),s=c.n(a),u=c(14),o=c(9),i=c(51),b=c(6),l=c(21),j=c(13),O=c.n(j),d=c(1);function h(){var e=Object(o.c)(l.a.getIsAuthenticated);return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("nav",{children:[Object(d.jsx)(u.b,{to:"/",exact:!0,className:O.a.navlink,children:"Home"}),e&&Object(d.jsx)(u.b,{to:"/contacts",exact:!0,className:O.a.navlink,children:"Phonebook"})]})})}var g=c(18);function f(){var e=Object(o.c)(g.b.getUsername),t=Object(o.b)(),c=Object(r.useCallback)((function(){return t(g.a.logOut())}),[t]);return Object(d.jsxs)("div",{className:O.a.userMenuBlock,children:[Object(d.jsxs)("span",{className:O.a.welcomeText,children:["Welcome, ",e,"."]}),Object(d.jsx)("button",{className:O.a.buttonLogOut,type:"button",onClick:c,children:"Logout"})]})}var p=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(u.b,{to:"/register",exact:!0,className:O.a.navlink,children:"Sign up"}),Object(d.jsx)(u.b,{to:"/login",exact:!0,className:O.a.navlink,children:"Log in"})]})};function x(){var e=Object(o.c)(l.a.getIsAuthenticated);return Object(d.jsxs)("header",{className:O.a.AppBarHeader,children:[Object(d.jsx)(h,{}),e?Object(d.jsx)(f,{}):Object(d.jsx)(p,{})]})}var v=c(31),m=c(19),C=c(35);function k(e){var t=e.children,c=(e.isAuthenticated,e.redirectTo),r=Object(C.a)(e,["children","isAuthenticated","redirectTo"]),n=Object(o.c)(g.b.getIsAuthenticated);return Object(d.jsx)(b.b,Object(m.a)(Object(m.a)({},r),{},{children:n?t:Object(d.jsx)(b.a,{to:c})}))}function S(e){e.component,e.isAuthenticated;var t=e.redirectTo,c=e.children,r=Object(C.a)(e,["component","isAuthenticated","redirectTo","children"]),n=Object(o.c)(g.b.getIsAuthenticated);return Object(d.jsx)(b.b,Object(m.a)(Object(m.a)({},r),{},{children:n&&r.restricted?Object(d.jsx)(b.a,{to:t}):c}))}var E=Object(r.lazy)((function(){return c.e(0).then(c.bind(null,95))})),U=Object(r.lazy)((function(){return c.e(0).then(c.bind(null,92))})),y=Object(r.lazy)((function(){return c.e(0).then(c.bind(null,93))})),R=Object(r.lazy)((function(){return c.e(0).then(c.bind(null,94))}));function q(){var e=Object(o.b)();return Object(r.useEffect)((function(){e(v.a.getCurrentUser())}),[e]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{children:[Object(d.jsx)(x,{}),Object(d.jsx)(r.Suspense,{fallback:Object(d.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:Object(d.jsxs)(b.d,{children:[Object(d.jsx)(S,{exact:!0,path:"/",children:Object(d.jsx)(E,{})}),Object(d.jsx)(S,{path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(d.jsx)(U,{})}),Object(d.jsx)(S,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(d.jsx)(y,{})}),Object(d.jsx)(k,{path:"/contacts",redirectTo:"/login",children:Object(d.jsx)(R,{})})]})})]})})}var w,A=c(34),_=c(2),T=c(52),N=c.n(T),B=c(16),I=c(5),M=c(7),z=c(22),L=Object(_.c)([],(w={},Object(I.a)(w,z.a.fetchContactSuccess,(function(e,t){return t.payload})),Object(I.a)(w,z.a.addContactSuccess,(function(e,t){return[].concat(Object(A.a)(e),[t.payload])})),Object(I.a)(w,z.a.deleteContactSuccess,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),w)),F=Object(_.c)("",Object(I.a)({},z.a.changeFilter,(function(e,t){return t.payload}))),H=Object(M.c)({items:L,filter:F}),Y=c(30),J=c(53),G=c.n(J),P=[].concat(Object(A.a)(Object(_.d)({serializableCheck:{ignoredActions:[B.a,B.f,B.b,B.c,B.d,B.e]}})),[N.a]),W={key:"auth",storage:G.a,whitelist:["token"]},D=Object(_.a)({reducer:{auth:Object(B.g)(W,Y.a),contacts:H},middleware:P,devTools:!1}),K={store:D,persistor:Object(B.h)(D)};c(85);s.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(o.a,{store:K.store,children:Object(d.jsx)(i.a,{loading:null,persistor:K.persistor,children:Object(d.jsx)(u.a,{children:Object(d.jsx)(q,{})})})})}),document.getElementById("root"))}},[[86,2,3]]]);
//# sourceMappingURL=main.d4f769d3.chunk.js.map